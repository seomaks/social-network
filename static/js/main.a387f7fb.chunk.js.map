{"version":3,"sources":["redux/profileReducer.tsx","assets/images/user.png","hoc/withAuthRedirect.tsx","redux/redux-store.tsx","redux/dialogsReducer.tsx","components/Users/Users.module.css","api/api.ts","components/Navbar/Navbar.module.css","components/common/FormsControls/FormsControls.tsx","redux/authReducer.tsx","components/Navbar/Navbar.tsx","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","components/common/Paginator/Paginator.tsx","components/Users/User.tsx","components/Users/Users.tsx","redux/users-selectors.ts","components/Users/UsersContainer.tsx","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","hoc/withSuspense.tsx","components/Login/Login.tsx","App.tsx","index.tsx","redux/usersReducer.tsx","assets/images/preloader.svg","components/common/Preloader/Preloader.tsx","components/common/FormsControls/FormsControls.module.css","utils/validators/validators.ts","redux/appReducer.tsx","components/common/Paginator/Paginator.module.css","components/Header/Header.module.css"],"names":["initialState","posts","id","message","likesCount","profile","status","addPostAC","newPostText","type","setStatus","getUserProfile","userId","dispatch","a","usersAPI","getProfile","response","data","getStatus","profileAPI","updateStatus","resultCode","savePhoto","file","photos","saveProfile","getState","auth","Error","stopSubmit","_error","messages","Promise","reject","profileReducer","state","action","newPost","Date","getTime","mapStateToProps","isAuth","withAuthRedirect","Component","connect","props","restProps","to","rootReducer","combineReducers","profilePage","dialogsPage","dialogsReducer","usersPage","usersReducer","authReducer","form","formReducer","app","appReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","SEND_MESSAGE","dialogs","name","sendMessageAC","newMessageBody","body","module","exports","instance","axios","create","withCredentials","baseURL","headers","getUsers","currentPage","pageSize","get","then","follow","post","unfollow","delete","console","warn","put","photoFile","formData","FormData","append","res","authAPI","me","login","email","password","rememberMe","captcha","logout","securityAPI","getCaptchaUrl","FormControl","meta","touched","error","children","hasError","className","classes","formControl","Textarea","input","Input","createField","placeholder","validators","component","text","validate","captchaUrl","payload","setAuthUserData","getCaptchaUrlSuccess","getAuthUserData","length","url","Navbar","nav","item","activeClassName","activeLink","News","Music","Settings","Paginator","pagesCont","Math","ceil","totalItemsCount","pages","i","push","portionCount","portionSize","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","cn","paginator","onClick","filter","p","map","selectedPage","pageNumber","e","onPageChanged","User","user","followingInProgress","src","small","userPhoto","alt","followed","disabled","some","Users","users","u","getPageSize","getTotalUsersCount","totalUsersCount","getCurrentPage","getIsFetching","isFetching","getFollowingInProgress","UsersContainer","this","Preloader","React","setCurrentPage","requestUsers","Header","header","logoText","loginBlock","HeaderContainer","withSuspense","Suspense","fallback","LoginReduxForm","reduxForm","handleSubmit","onSubmit","required","undefined","style","formSummaryError","Login","useSelector","useDispatch","ProfileContainer","lazy","DialogsContainer","App","initializedApp","initialized","path","render","ReactDOM","document","getElementById","usersID","toggleIsFetching","toggleFollowingProgress","items","totalCount","preloader","value","maxLengthCreator","maxLength"],"mappings":"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","file":"static/js/main.a387f7fb.chunk.js","sourcesContent":["import {Dispatch} from \"redux\";\r\nimport {profileAPI, usersAPI} from \"../api/api\";\r\nimport {FormAction, stopSubmit} from 'redux-form'\r\nimport {BaseThunkType} from \"./redux-store\";\r\n\r\nexport type PostType = {\r\n  id: number\r\n  message: string\r\n  likesCount: number\r\n}\r\nexport type ContactsType = {\r\n  github: string\r\n  vk: string\r\n  facebook: string\r\n  instagram: string\r\n  twitter: string\r\n  website: string\r\n  youtube: string\r\n  mainLink: string\r\n}\r\nexport type PhotosType = {\r\n  small: string\r\n  large: string\r\n}\r\nexport type ProfileType = {\r\n  userId: number | undefined\r\n  aboutMe: string\r\n  lookingForAJob: boolean\r\n  lookingForAJobDescription: string\r\n  fullName: string\r\n  contacts: ContactsType\r\n  photos: PhotosType\r\n  status: string\r\n}\r\n\r\nlet initialState = {\r\n  posts: [\r\n    {id: 1, message: 'Hi, how are you?', likesCount: 12},\r\n    {id: 2, message: 'It\\'s my first post', likesCount: 11},\r\n  ] as Array<PostType>,\r\n  profile: null as ProfileType | null,\r\n  status: \"\"\r\n}\r\n\r\nexport type InitialStateType = typeof initialState\r\nexport type ActionsTypes =\r\n  ReturnType<typeof addPostAC>\r\n  | ReturnType<typeof setUserProfile>\r\n  | ReturnType<typeof setStatus>\r\n  | ReturnType<typeof savePhotoSuccess>\r\n\r\ntype ThunkType = BaseThunkType<ActionsTypes | FormAction>\r\n\r\n\r\nexport const profileReducer = (state: InitialStateType = initialState, action: ActionsTypes): InitialStateType => {\r\n\r\n  switch (action.type) {\r\n    case \"profile/ADD-POST\": {\r\n      const newPost: PostType = {\r\n        id: new Date().getTime(),\r\n        message: action.newPostText,\r\n        likesCount: 0\r\n      }\r\n      return {\r\n        ...state,\r\n        posts: [...state.posts, newPost],\r\n      };\r\n    }\r\n    case \"profile/SET_USER_PROFILE\": {\r\n      return {\r\n        ...state,\r\n        profile: action.profile\r\n      };\r\n    }\r\n    case \"profile/SET_STATUS\": {\r\n      return {\r\n        ...state,\r\n        status: action.status\r\n      };\r\n    }\r\n    case \"profile/SAVE_PHOTO_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        profile: {...state.profile, photos: action.photos} as ProfileType\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const addPostAC = (newPostText: string) => {\r\n  return {\r\n    type: \"profile/ADD-POST\",\r\n    newPostText\r\n  } as const\r\n}\r\n\r\nexport const setUserProfile = (profile: ProfileType) => {\r\n  return {\r\n    type: \"profile/SET_USER_PROFILE\",\r\n    profile\r\n  } as const\r\n}\r\n\r\nexport const setStatus = (status: string) => {\r\n  return {\r\n    type: \"profile/SET_STATUS\",\r\n    status\r\n  } as const\r\n}\r\n\r\nexport const savePhotoSuccess = (photos: PhotosType) => {\r\n  return {\r\n    type: \"profile/SAVE_PHOTO_SUCCESS\",\r\n    photos\r\n  } as const\r\n}\r\n\r\nexport const getUserProfile = (userId: number): ThunkType => async (dispatch: Dispatch<ActionsTypes>) => {\r\n  const response = await usersAPI.getProfile(userId)\r\n  dispatch(setUserProfile(response.data))\r\n}\r\n\r\nexport const getStatus = (userId: number): ThunkType => async (dispatch: Dispatch<ActionsTypes>) => {\r\n  const response = await profileAPI.getStatus(userId)\r\n  dispatch(setStatus(response.data))\r\n}\r\n\r\nexport const updateStatus = (status: string): ThunkType => async (dispatch: Dispatch<ActionsTypes>) => {\r\n  const response = await profileAPI.updateStatus(status)\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(setStatus(status))\r\n  }\r\n}\r\n\r\nexport const savePhoto = (file: File): ThunkType => async (dispatch: Dispatch<ActionsTypes>) => {\r\n  const response = await profileAPI.savePhoto(file)\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(savePhotoSuccess(response.data.data.photos))\r\n  }\r\n}\r\nexport const saveProfile = (profile: ProfileType): ThunkType => async (dispatch, getState) => {\r\n  const userId = getState().auth.id\r\n  const data = await profileAPI.saveProfile(profile)\r\n\r\n  if (data.resultCode === 0) {\r\n    if (userId != null) {\r\n      dispatch(getUserProfile(userId))\r\n    } else {\r\n      throw new Error(\"userId can't be null\")\r\n    }\r\n  } else {\r\n    dispatch(stopSubmit(\"edit-profile\", {_error: data.messages[0] }))\r\n    return Promise.reject(data.messages[0])\r\n  }\r\n}\r\n\r\nexport default profileReducer","export default __webpack_public_path__ + \"static/media/user.2bd26d3a.png\";","import {Redirect} from \"react-router-dom\";\r\nimport React, {ComponentType} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../redux/redux-store\";\r\n\r\ntype MapStatePropsType = {\r\n  isAuth: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\nreturn {\r\n  isAuth: state.auth.isAuth\r\n}\r\n}\r\n\r\nexport function withAuthRedirect <T>(Component: ComponentType<T>)  {\r\nconst RedirectComponent = (props: MapStatePropsType) => {\r\n  let {isAuth, ...restProps} = props\r\n  if (!isAuth) return <Redirect to={\"/login\"} />\r\n  return <Component {...restProps as T}/>\r\n}\r\n\r\nlet ConnectedRedirectComponent = connect(mapStateToProps)(RedirectComponent)\r\n  return ConnectedRedirectComponent\r\n}\r\n\r\n","import {\r\n  Action,\r\n  applyMiddleware,\r\n  combineReducers,\r\n  compose,\r\n  createStore\r\n} from \"redux\";\r\nimport profileReducer from \"./profileReducer\";\r\nimport dialogsReducer from \"./dialogsReducer\";\r\nimport {usersReducer} from \"./usersReducer\";\r\nimport {authReducer} from \"./authReducer\";\r\nimport thunkMiddleware, {ThunkAction} from \"redux-thunk\";\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport {appReducer} from \"./appReducer\";\r\n\r\n\r\nlet rootReducer = combineReducers({\r\n  profilePage: profileReducer,\r\n  dialogsPage: dialogsReducer,\r\n  usersPage: usersReducer,\r\n  auth: authReducer,\r\n  form: formReducer,\r\n  app: appReducer\r\n})\r\n//@ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n//export const store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\r\n\r\nexport type AppStateType = ReturnType<typeof rootReducer>;\r\nexport type BaseThunkType<A extends Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n\r\n//@ts-ignore\r\nwindow.store = store;","import {ActionsTypes} from \"./store\";\r\n\r\nconst SEND_MESSAGE = 'dialogs/SEND-MESSAGE';\r\n\r\nexport type DialogsType = {\r\n  id: number\r\n  name: string\r\n}\r\n\r\nexport type MessageType = {\r\n  id: number\r\n  message: string\r\n}\r\n\r\nlet initialState = {\r\n  dialogs: [\r\n    {id: 1, name: 'Maks'},\r\n    {id: 2, name: 'Boris'},\r\n    {id: 3, name: 'Valera'},\r\n    {id: 4, name: 'Olya'},\r\n    {id: 5, name: 'Natasha'},\r\n    {id: 6, name: 'Sergey'}\r\n  ] as Array<DialogsType>,\r\n  messages: [\r\n    {id: 1, message: 'Hi'},\r\n    {id: 2, message: 'How are you?'},\r\n    {id: 3, message: 'Yo'},\r\n    {id: 4, message: 'Where are you?'},\r\n    {id: 5, message: 'Relax'},\r\n    {id: 6, message: 'Yep'}\r\n  ] as Array<MessageType>\r\n}\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nexport const dialogsReducer = (state: InitialStateType = initialState, action: ActionsTypes): InitialStateType => {\r\n\r\n  switch (action.type) {\r\n    case SEND_MESSAGE: {\r\n      let body = action.newMessageBody;\r\n\r\n      return {\r\n        ...state,\r\n        messages: [...state.messages, {id: 6, message: body}]\r\n      }\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const sendMessageAC = (newMessageBody: string) => {\r\n  return {\r\n    type: SEND_MESSAGE, newMessageBody\r\n  } as const\r\n}\r\n\r\nexport default dialogsReducer","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__8vOZa\"};","import axios from \"axios\";\r\nimport {ProfileType} from \"../redux/profileReducer\";\r\n\r\nconst instance = axios.create({\r\n  withCredentials: true,\r\n  baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n  headers: {\"API-KEY\": \"0c074aaa-aceb-492d-a73f-9ca4f6d5a703\"}\r\n})\r\n\r\nexport const usersAPI = {\r\n  getUsers(currentPage: number, pageSize: number) {\r\n    return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n      .then(response => {\r\n          return response.data\r\n        }\r\n      )\r\n  },\r\n  follow(userId: number) {\r\n    return instance.post(`follow/${userId}`\r\n    )\r\n  },\r\n  unfollow(userId: number) {\r\n    return instance.delete(`follow/${userId}`)\r\n  },\r\n  getProfile(userId: number) {\r\n    console.warn('Obsolete method. Please profileAPI object')\r\n    return profileAPI.getProfile(userId)\r\n  }\r\n}\r\n\r\nexport const profileAPI = {\r\n  getProfile(userId: number) {\r\n    return instance.get(`profile/` + userId)\r\n  },\r\n  getStatus(userId: number) {\r\n    return instance.get(`profile/status/` + userId)\r\n  },\r\n  updateStatus(status: string) {\r\n    return instance.put(`profile/status`, {status: status})\r\n  },\r\n  savePhoto(photoFile: File) {\r\n    let formData = new FormData();\r\n    formData.append(\"image\", photoFile);\r\n    return instance.put('/profile/photo', formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\"\r\n      }\r\n    })\r\n  },\r\n  saveProfile(profile: ProfileType) {\r\n    return instance\r\n      .put(`profile`, profile)\r\n      .then(res => res.data)\r\n  }\r\n}\r\n\r\nexport const authAPI = {\r\n  me() {\r\n    return instance.get(`auth/me`)\r\n  },\r\n  login(email: string, password: string, rememberMe: boolean = false, captcha: null | string = null) {\r\n    return instance.post(`auth/login`, {email, password, rememberMe, captcha})\r\n  },\r\n  logout() {\r\n    return instance.delete(`auth/login`)\r\n  }\r\n}\r\n\r\nexport const securityAPI = {\r\n  getCaptchaUrl() {\r\n    return instance.get(`security/get-captcha-url`)\r\n  }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__o70OO\",\"item\":\"Navbar_item__39kXx\",\"activeLink\":\"Navbar_activeLink__1REca\"};","import classes from \"./FormsControls.module.css\";\r\nimport React from \"react\";\r\nimport {Field, WrappedFieldMetaProps, WrappedFieldProps} from \"redux-form\";\r\nimport {FieldValidatorType} from \"../../../utils/validators/validators\";\r\n\r\ntype FormControlPropsType = {\r\n  meta: WrappedFieldMetaProps\r\n}\r\n\r\nconst FormControl: React.FC<FormControlPropsType> = ({meta: {touched,error},children}) => {\r\n  const hasError = touched && error\r\n  return (\r\n    <div className={classes.formControl + \" \" + (hasError ? classes.error : \" \")}>\r\n      <div>\r\n        {children}\r\n      </div>\r\n      {hasError && <span>{error}</span>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const Textarea: React.FC<WrappedFieldProps> = (props) => {\r\n  const {input, meta, ...restProps} = props\r\n  return <FormControl {...props}><textarea {...input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport const Input: React.FC<WrappedFieldProps> = (props) => {\r\n  const {input, meta, ...restProps} = props\r\n  return  <FormControl {...props}><input {...input} {...restProps} /></FormControl>\r\n}\r\n\r\nexport function createField<FormKeysType extends string>(placeholder: string | undefined,\r\n                                                         name: FormKeysType,\r\n                                                         validators: Array<FieldValidatorType>,\r\n                                                         component: React.FC<WrappedFieldProps>,\r\n                                                         props = {}, text = \"\") {\r\n  return <div>\r\n    <Field placeholder={placeholder} name={name}\r\n           validate={validators}\r\n           component={component}\r\n           {...props}\r\n    /> {text}\r\n  </div>\r\n}","import {Dispatch} from \"redux\";\r\nimport {authAPI, securityAPI} from \"../api/api\";\r\nimport {FormAction, stopSubmit} from \"redux-form\";\r\nimport {BaseThunkType} from \"./redux-store\";\r\nimport message from \"../components/Dialogs/Message/Message\";\r\n\r\ntype ActionTypes =\r\n  ReturnType<typeof setAuthUserData>\r\n  | ReturnType<typeof getCaptchaUrlSuccess>\r\n\r\nconst initialState: InitialStateType = {\r\n  id: null,\r\n  email: null,\r\n  login: null,\r\n  isAuth: false,\r\n  captchaUrl: null\r\n}\r\n\r\nexport type InitialStateType = {\r\n  id: number | null,\r\n  email: string | null,\r\n  login: string | null,\r\n  isAuth: boolean,\r\n  captchaUrl: string | null\r\n}\r\n\r\nexport const authReducer = (state: InitialStateType = initialState, action: ActionTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case 'auth/SET_USER_DATA':\r\n    case 'auth/GET_CAPTCHA_URL_SUCCESS':\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const setAuthUserData = (id: number | null, email: string | null, login: string | null, isAuth: boolean) => {\r\n  return {\r\n    type: 'auth/SET_USER_DATA', payload: {id, email, login, isAuth}\r\n  } as const\r\n};\r\n\r\nexport const getCaptchaUrlSuccess = (captchaUrl: string | null) => {\r\n  return {\r\n    type: 'auth/GET_CAPTCHA_URL_SUCCESS', payload: {captchaUrl}\r\n  } as const\r\n};\r\n\r\nexport const getAuthUserData = () => async (dispatch: Dispatch<ActionTypes>) => {\r\n  const response = await authAPI.me()\r\n  if (response.data.resultCode === 0) {\r\n    let {id, login, email} = response.data.data;\r\n    dispatch(setAuthUserData(id, email, login, true))\r\n  }\r\n}\r\n\r\ntype ThunkType = BaseThunkType<ActionTypes | FormAction>\r\n\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string): ThunkType => async (dispatch) => {\r\n  const response = await authAPI.login(email, password, rememberMe, captcha)\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(getAuthUserData())\r\n  } else {\r\n    if (response.data.resultCode === 10) {\r\n      dispatch(getCaptchaUrl())\r\n    }\r\n    const message = response.data.messages.length > 0 ? response.data.messages[0] : 'some error'\r\n    dispatch(stopSubmit(\"login\", {_error: message}))\r\n  }\r\n}\r\n\r\nexport const logout = () => async (dispatch: Dispatch<ActionTypes>) => {\r\n  const response = await authAPI.logout()\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(setAuthUserData(null, null, null, false))\r\n  }\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n  const response = await securityAPI.getCaptchaUrl()\r\n  const captchaUrl = response.data.url\r\n  dispatch(getCaptchaUrlSuccess(captchaUrl))\r\n}","import React from \"react\";\r\nimport classes from './Navbar.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst Navbar = () => {\r\n  return <nav className={classes.nav}>\r\n    <div className={classes.item}><NavLink to=\"/profile\" activeClassName={classes.activeLink}>Profile</NavLink></div>\r\n    <div className={classes.item}><NavLink to=\"/dialogs\" activeClassName={classes.activeLink}>Messages</NavLink></div>\r\n    <div className={classes.item}><NavLink to=\"/news\" activeClassName={classes.activeLink}>News</NavLink></div>\r\n    <div className={classes.item}><NavLink to=\"/music\" activeClassName={classes.activeLink}>Music</NavLink></div>\r\n    <div className={classes.item}><NavLink to=\"/settings\" activeClassName={classes.activeLink}>Settings</NavLink></div>\r\n    <div className={classes.item}><NavLink to=\"/users\" activeClassName={classes.activeLink}>Users</NavLink></div>\r\n  </nav>\r\n}\r\n\r\nexport default Navbar\r\n","import React from \"react\";\r\n\r\nconst News = () => {\r\n  return (\r\n    <div>\r\n      News\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default News;","import React from \"react\";\r\n\r\nconst Music = () => {\r\n  return (\r\n    <div>\r\n      Music\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Music;","import React from \"react\";\r\n\r\nconst Settings = () => {\r\n  return (\r\n    <div>\r\n      Settings\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Settings;","import React, {useState} from \"react\";\r\nimport classes from \"../../common/Paginator/Paginator.module.css\";\r\nimport cn from \"classnames\"\r\n\r\ntype PropsType = {\r\n  onPageChanged: (pageNumber: number) => void\r\n  totalItemsCount: number\r\n  pageSize: number\r\n  currentPage: number\r\n  portionSize: number\r\n}\r\n\r\nexport let Paginator = (props: PropsType) => {\r\n\r\n  let pagesCont = Math.ceil(props.totalItemsCount / props.pageSize);\r\n  let pages = [];\r\n  for (let i = 1; i <= pagesCont; i++) {\r\n      pages.push(i);\r\n  }\r\n\r\n  let portionCount = Math.ceil(pagesCont / props.portionSize)\r\n  let [portionNumber, setPortionNumber] = useState(1)\r\n  const leftPortionPageNumber = (portionNumber - 1) * props.portionSize + 1\r\n  const rightPortionPageNumber = portionNumber * props.portionSize\r\n\r\n  return <div className={cn(classes.paginator)}>\r\n    {portionNumber > 1 &&\r\n      <button onClick={() => {\r\n        setPortionNumber(portionNumber - 1)\r\n      }}>PREV</button>}\r\n    {pages\r\n      .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n      .map(p => {\r\n        return <span className={cn({\r\n          [classes.selectedPage]: props.currentPage === p\r\n        }, classes.pageNumber)}\r\n                     key={p}\r\n                     onClick={(e) => {\r\n                       props.onPageChanged(p);\r\n                     }}>{p}</span>\r\n      })}\r\n    {portionCount > portionNumber &&\r\n      <button onClick={() => {\r\n        setPortionNumber(portionNumber + 1)\r\n      }}>NEXT</button>}\r\n  </div>\r\n}","import React from \"react\";\r\nimport classes from \"./Users.module.css\";\r\nimport userPhoto from \"../../assets/images/user.png\";\r\nimport {UserType} from \"../../redux/usersReducer\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\ntype PropsType = {\r\n  user: UserType\r\n  follow: (userID: number) => void\r\n  unfollow: (userID: number) => void\r\n  followingInProgress: number[]\r\n}\r\n\r\nexport let User = ({user, follow, unfollow, followingInProgress}: PropsType) => {\r\n  return (\r\n     <div>\r\n      <span>\r\n        <div>\r\n          <NavLink to={'/profile/' + user.id}>\r\n        <img src={user.photos.small != null ? user.photos.small : userPhoto}\r\n             className={classes.userPhoto} alt={'user'}/>\r\n            </NavLink>\r\n      </div>\r\n      <div>\r\n        {user.followed\r\n          ? <button disabled={followingInProgress.some(id => id === user.id)}\r\n                    onClick={() => {\r\n                      unfollow(user.id)\r\n                    }}>Unfollow</button>\r\n          : <button disabled={followingInProgress.some(id => id === user.id)}\r\n                    onClick={() => {\r\n                      follow(user.id)\r\n                    }}>Follow</button>}\r\n      </div></span>\r\n      <span>\r\n<span>\r\n  <div>{user.name}</div>\r\n  <div>{user.status}</div>\r\n</span>\r\n<span>\r\n  <div>{\"user.location.country\"}</div><div>{\"user.location.city\"}</div>\r\n</span>\r\n      </span>\r\n    </div>)\r\n}","import React from \"react\";\r\nimport {UserType} from \"../../redux/usersReducer\";\r\nimport {Paginator} from \"../common/Paginator/Paginator\";\r\nimport {User} from \"./User\";\r\n\r\ntype PropsType = {\r\n  onPageChanged: (pageNumber: number) => void\r\n  totalItemsCount: number\r\n  pageSize: number\r\n  currentPage: number\r\n  users: Array<UserType>\r\n  follow: (userID: number) => void\r\n  unfollow: (userID: number) => void\r\n  followingInProgress: number[]\r\n}\r\n\r\nexport let Users = (props: PropsType) => {\r\n  return <div>\r\n    <Paginator onPageChanged={props.onPageChanged}\r\n               totalItemsCount={props.totalItemsCount}\r\n               pageSize={props.pageSize}\r\n               currentPage={props.currentPage}\r\n               portionSize={10}/>\r\n    <div>\r\n      {props.users.map(u => <User user={u}\r\n                                  key={u.id}\r\n                                  followingInProgress={props.followingInProgress}\r\n                                  follow={props.follow}\r\n                                  unfollow={props.unfollow}\r\n      />)\r\n      }\r\n    </div>\r\n  </div>\r\n}","import {AppStateType} from \"./redux-store\";\r\n\r\nexport const getUsers = (state: AppStateType) => {\r\n  return state.usersPage.users\r\n}\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n  return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state: AppStateType) => {\r\n  return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n  return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetching = (state: AppStateType) => {\r\n  return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n  return state.usersPage.followingInProgress\r\n}","import React from \"react\";\r\nimport {\r\n  follow, requestUsers,\r\n  setCurrentPage,\r\n  unfollow,\r\n  UserType\r\n} from \"../../redux/usersReducer\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {connect} from \"react-redux\";\r\nimport {Users} from \"./Users\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport {compose, Dispatch} from \"redux\";\r\nimport {ActionsTypes} from \"../../redux/store\";\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\r\nimport {\r\n  getCurrentPage, getFollowingInProgress, getIsFetching,\r\n  getPageSize,\r\n  getTotalUsersCount, getUsers\r\n} from \"../../redux/users-selectors\";\r\n\r\ntype MapStatePropsType = {\r\n  users: Array<UserType>\r\n  pageSize: number\r\n  totalUsersCount: number\r\n  currentPage: number\r\n  isFetching: boolean\r\n  followingInProgress: number[]\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n  follow: (userID: number) => void\r\n  unfollow: (userID: number) => void\r\n  setUsers: (users: Array<UserType>) => void\r\n  setCurrentPage: (pageNumber: number) => void\r\n  setTotalUsersCount: (totalCount: number) => void\r\n  dispatch: Dispatch<ActionsTypes>\r\n  getUsers: (currentPage: number, pageSize: number) => void\r\n}\r\n\r\nexport type UsersPropsType = MapStatePropsType & MapDispatchPropsType\r\n\r\nclass UsersContainer extends React.Component<UsersPropsType> {\r\n  componentDidMount() {\r\n    this.props.getUsers(this.props.currentPage, this.props.pageSize);\r\n  }\r\n\r\n  onPageChanged = (pageNumber: number) => {\r\n    this.props.getUsers(pageNumber, this.props.pageSize)\r\n     ;\r\n  }\r\n\r\n  render() {\r\n    return <>\r\n      {this.props.isFetching ? <Preloader/> : \"\"}\r\n      <Users\r\n        totalItemsCount={this.props.totalUsersCount}\r\n        pageSize={this.props.pageSize}\r\n        currentPage={this.props.currentPage}\r\n        onPageChanged={this.onPageChanged}\r\n        users={this.props.users}\r\n        follow={this.props.follow}\r\n        unfollow={this.props.unfollow}\r\n        followingInProgress={this.props.followingInProgress}\r\n      />\r\n    </>\r\n  }\r\n}\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n  return {\r\n    users: getUsers(state),\r\n    pageSize: getPageSize(state),\r\n    totalUsersCount: getTotalUsersCount(state),\r\n    currentPage: getCurrentPage(state),\r\n    isFetching: getIsFetching(state),\r\n    followingInProgress: getFollowingInProgress(state)\r\n  }\r\n}\r\n\r\nexport default compose<React.ComponentType>(\r\n  withAuthRedirect,\r\n  connect(mapStateToProps, {follow, unfollow, setCurrentPage, getUsers: requestUsers})\r\n)(UsersContainer)","import React from \"react\";\r\nimport classes from './Header.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\ntype PropsType = {\r\n  isAuth: boolean,\r\n  login: string | null\r\n  logout: () => void\r\n}\r\n\r\nconst Header = (props: PropsType) => {\r\n  return <header className={classes.header}>\r\n    <span className={classes.logoText}>Kawabanga</span>\r\n    <div className={classes.loginBlock}>\r\n      {props.isAuth ? <div>{props.login} - <button onClick={props.logout}>Log out</button></div> :\r\n        <NavLink to=\"/login\">\r\n          Login\r\n        </NavLink>}\r\n    </div>\r\n  </header>\r\n}\r\n\r\nexport default Header\r\n","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../../redux/authReducer\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\n\r\n\r\ntype MapStatePropsType = {\r\n  isAuth: boolean\r\n  id: number | null\r\n  email: string | null\r\n  login: string | null\r\n}\r\n\r\ntype MapDispatchToProps = {\r\n  logout: () => void\r\n}\r\n\r\nexport type PropsType = MapStatePropsType & MapDispatchToProps\r\n\r\n\r\nclass HeaderContainer extends React.Component<PropsType> {\r\n  render() {\r\n    return <Header {...this.props} isAuth={this.props.isAuth}\r\n                   login={this.props.login}/>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => ({\r\n  isAuth: state.auth.isAuth,\r\n  login: state.auth.login,\r\n  id: state.auth.id,\r\n  email: state.auth.email\r\n})\r\n\r\nexport default connect(mapStateToProps, {logout})(HeaderContainer)\r\n","import React, {ComponentType} from \"react\";\r\nimport Preloader from \"../components/common/Preloader/Preloader\";\r\n\r\n\r\n\r\nexport function withSuspense <T>(Component: ComponentType<T>)  {\r\n  return (props: any) => {\r\n   return <React.Suspense fallback={<Preloader/>}>\r\n    <Component {...props} />\r\n   </React.Suspense>\r\n  }\r\n}\r\n\r\n","import React from 'react'\r\nimport {InjectedFormProps, reduxForm} from 'redux-form'\r\nimport {createField, Input} from '../common/FormsControls/FormsControls'\r\nimport {required} from '../../utils/validators/validators'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {Redirect} from 'react-router-dom'\r\nimport style from './../common/FormsControls/FormsControls.module.css'\r\nimport {AppStateType} from '../../redux/redux-store'\r\nimport {GetStringKeys} from \"../Profile/ProfileInfo/ProfileDataForm\";\r\nimport {login} from \"../../redux/authReducer\";\r\n\r\ntype LoginFormOwnProps = {\r\n  captchaUrl: string | null\r\n}\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormValuesType, LoginFormOwnProps> & LoginFormOwnProps>\r\n  = ({handleSubmit, error, captchaUrl}) => {\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      {createField<LoginFormValuesTypeKeys>('Email', 'email', [required], Input)}\r\n      {createField<LoginFormValuesTypeKeys>('Password', 'password', [required], Input, {type: 'password'})}\r\n      {createField<LoginFormValuesTypeKeys>(undefined, 'rememberMe', [], Input, {type: 'checkbox'}, 'remember me')}\r\n\r\n      {captchaUrl && <img src={captchaUrl}/>}\r\n      {captchaUrl && createField<LoginFormValuesTypeKeys>('Symbols from image', 'captcha', [required], Input, {})}\r\n\r\n\r\n      {error && <div className={style.formSummaryError}>\r\n        {error}\r\n      </div>\r\n      }\r\n      <div>\r\n        <button>Login</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<LoginFormValuesType, LoginFormOwnProps>({form: 'login'})(LoginForm)\r\n\r\nexport type LoginFormValuesType = {\r\n  captcha: string\r\n  rememberMe: boolean\r\n  password: string\r\n  email: string\r\n}\r\ntype LoginFormValuesTypeKeys = GetStringKeys<LoginFormValuesType>\r\n\r\nexport const Login: React.FC = () => {\r\n  const captchaUrl = useSelector((state: AppStateType) => state.auth.captchaUrl)\r\n  const isAuth = useSelector((state: AppStateType) => state.auth.isAuth)\r\n  const dispatch = useDispatch()\r\n\r\n  const onSubmit = (formData: LoginFormValuesType) => {\r\n    dispatch(login(formData.email, formData.password, formData.rememberMe, formData.captcha))\r\n  }\r\n\r\n  if (isAuth) {\r\n    return <Redirect to={'/profile'}/>\r\n  }\r\n\r\n  return <div>\r\n    <h1>Login</h1>\r\n    <LoginReduxForm onSubmit={onSubmit} captchaUrl={captchaUrl}/>\r\n  </div>\r\n}","import React  from \"react\";\nimport './App.css';\nimport Navbar from \"./components/Navbar/Navbar\";\nimport {HashRouter, Route, Switch} from \"react-router-dom\";\nimport News from \"./components/News/News\";\nimport Music from \"./components/Music/Music\";\nimport Settings from \"./components/Settings/Settings\";\nimport UsersContainer from \"./components/Users/UsersContainer\";\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\nimport {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {initializedApp} from \"./redux/appReducer\";\nimport {AppStateType} from \"./redux/redux-store\";\nimport Preloader from \"./components/common/Preloader/Preloader\";\nimport {withSuspense} from \"./hoc/withSuspense\";\nimport {Login} from \"./components/Login/Login\";\nconst ProfileContainer = React.lazy(() => import(\"./components/Profile/ProfileContainer\"));\nconst DialogsContainer = React.lazy(() => import(\"./components/Dialogs/DialogsContainer\"));\n\ntype MapStatePropsType = {\n  initialized: boolean\n}\n\ntype MapDispatchToProps = {\n  initializedApp: () => void\n}\n\ntype PropsType = MapStatePropsType & MapDispatchToProps\n\nclass App extends Component<PropsType> {\n  componentDidMount() {\n    this.props.initializedApp()\n  }\n\n  render() {\n    if (!this.props.initialized) {\n      return <Preloader/>\n    }\n\n    return (\n      <HashRouter>\n        <div className='app-wrapper'>\n          <HeaderContainer/>\n          <Navbar/>\n          <div className='app-wrapper-content'>\n            <Switch>\n              <Route path='/login' component={Login}/>\n              <Route path='/profile/:userId?'\n                     render={withSuspense(ProfileContainer)}/>\n              <Route path='/dialogs'\n                     render={withSuspense(DialogsContainer)}/>\n              <Route path='/news' component={News}/>\n              <Route path='/music' component={Music}/>\n              <Route path='/settings' component={Settings}/>\n              <Route path='/users' component={UsersContainer}/>\n            </Switch>\n          </div>\n        </div>\n      </HashRouter>)\n  }\n}\n\nconst mapStateToProps = (state: AppStateType) => ({\n  initialized: state.app.initialized\n})\n\nexport default connect(mapStateToProps, {initializedApp})(App)\n","import ReactDOM from 'react-dom';\nimport App from './App';\nimport {store} from './redux/redux-store'\nimport {Provider} from \"react-redux\";\n\n\n  ReactDOM.render(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    document.getElementById('root'))","import {Dispatch} from \"redux\";\r\nimport {usersAPI} from \"../api/api\";\r\n\r\ntype UsersLocation = {\r\n  city: string\r\n  country: string\r\n}\r\n\r\ntype PhotosType = {\r\n  small: string | null\r\n  large: string | null\r\n}\r\n\r\nexport type UserType = {\r\n  id: number\r\n  photoUrl?: string\r\n  photos: PhotosType\r\n  followed: boolean\r\n  name: string\r\n  status: string\r\n  location?: UsersLocation\r\n}\r\n\r\ntype ActionTypes =\r\n  ReturnType<typeof followSuccess>\r\n  | ReturnType<typeof unfollowSuccess>\r\n  | ReturnType<typeof setUsers>\r\n  | ReturnType<typeof setCurrentPage>\r\n  | ReturnType<typeof setTotalUsersCount>\r\n  | ReturnType<typeof toggleIsFetching>\r\n  | ReturnType<typeof toggleFollowingProgress>\r\n\r\nconst initialState: InitialStateType = {\r\n  users: [],\r\n  pageSize: 10,\r\n  totalUsersCount: 0,\r\n  currentPage: 1,\r\n  setCurrentPage: 1,\r\n  isFetching: false,\r\n  followingInProgress: []\r\n}\r\n\r\nexport type InitialStateType = {\r\n  users: Array<UserType>\r\n  pageSize: number\r\n  totalUsersCount: number\r\n  currentPage: number\r\n  setCurrentPage: number\r\n  isFetching: boolean\r\n  followingInProgress: number[]\r\n}\r\n\r\nexport const usersReducer = (state: InitialStateType = initialState, action: ActionTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case 'users/FOLLOW':\r\n      return {\r\n        ...state,\r\n        users: state.users.map(u => {\r\n          if (u.id === action.usersID) {\r\n            return {...u, followed: true};\r\n          }\r\n          return u;\r\n        })\r\n      };\r\n    case 'users/UNFOLLOW':\r\n      return {\r\n        ...state,\r\n        users: state.users.map(u => {\r\n          if (u.id === action.usersID) {\r\n            return {...u, followed: false};\r\n          }\r\n          return u;\r\n        })\r\n      };\r\n    case 'users/SET_USERS':\r\n      return {\r\n        ...state,\r\n        users: action.users\r\n      }\r\n    case 'users/SET_CURRENT_PAGE':\r\n      return {\r\n        ...state,\r\n        currentPage: action.currentPage\r\n      }\r\n    case 'users/SET_TOTAL_USERS_COUNT':\r\n      return {\r\n        ...state,\r\n        totalUsersCount: action.totalUsersCount\r\n      }\r\n    case 'users/TOGGLE_IS_FETCHING':\r\n      return {\r\n        ...state,\r\n        isFetching: action.isFetching\r\n      }\r\n    case 'users/TOGGLE_IS_FOLLOWING_PROGRESS':\r\n      return {\r\n        ...state,\r\n        followingInProgress: action.isFetching\r\n          ? [...state.followingInProgress, action.userId]\r\n          : state.followingInProgress.filter(id => id !== action.userId)\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const followSuccess = (usersID: number) => {\r\n  return {\r\n    type: 'users/FOLLOW',\r\n    usersID: usersID\r\n  } as const\r\n};\r\nexport const unfollowSuccess = (usersID: number) => {\r\n  return {\r\n    type: 'users/UNFOLLOW',\r\n    usersID: usersID\r\n  } as const\r\n};\r\nexport const setUsers = (users: Array<UserType>) => {\r\n  return {\r\n    type: 'users/SET_USERS',\r\n    users: users\r\n  } as const\r\n}\r\n\r\nexport const setCurrentPage = (currentPage: number) => {\r\n  return {\r\n    type: 'users/SET_CURRENT_PAGE',\r\n    currentPage: currentPage\r\n  } as const\r\n}\r\n\r\nexport const setTotalUsersCount = (totalUsersCount: number) => {\r\n  return {\r\n    type: 'users/SET_TOTAL_USERS_COUNT',\r\n    totalUsersCount\r\n  } as const\r\n}\r\n\r\nexport const toggleIsFetching = (isFetching: boolean) => {\r\n  return {\r\n    type: 'users/TOGGLE_IS_FETCHING',\r\n    isFetching\r\n  } as const\r\n}\r\n\r\nexport const toggleFollowingProgress = (isFetching: boolean, userId: number) => {\r\n  return {\r\n    type: 'users/TOGGLE_IS_FOLLOWING_PROGRESS',\r\n    isFetching, userId\r\n  } as const\r\n}\r\n\r\nexport const requestUsers = (currentPage: number, pageSize: number) => {\r\n  return async (dispatch: Dispatch<ActionTypes>) => {\r\n    dispatch(toggleIsFetching(true))\r\n    const data = await usersAPI.getUsers(currentPage, pageSize)\r\n    dispatch(setCurrentPage(currentPage))\r\n    dispatch(toggleIsFetching(false))\r\n    dispatch(setUsers(data.items))\r\n    dispatch(setTotalUsersCount(data.totalCount))\r\n  }\r\n}\r\n\r\nexport const follow = (userId: number) => {\r\n  return async (dispatch: Dispatch<ActionTypes>) => {\r\n    dispatch(toggleFollowingProgress(true, userId))\r\n    const response = await usersAPI.follow(userId)\r\n    if (response.data.resultCode === 0) {\r\n      dispatch(followSuccess(userId))\r\n    }\r\n    dispatch(toggleFollowingProgress(false, userId))\r\n  }\r\n}\r\n\r\nexport const unfollow = (userId: number) => {\r\n  return async (dispatch: Dispatch<ActionTypes>) => {\r\n    dispatch(toggleFollowingProgress(true, userId))\r\n    const response = await usersAPI.unfollow(userId)\r\n    if (response.data.resultCode === 0) {\r\n      dispatch(unfollowSuccess(userId))\r\n    }\r\n    dispatch(toggleFollowingProgress(false, userId))\r\n  }\r\n}","export default __webpack_public_path__ + \"static/media/preloader.67b2533e.svg\";","import preloader from \"../../../assets/images/preloader.svg\";\r\nimport React from \"react\";\r\n\r\nlet Preloader = () => {\r\nreturn <img src={preloader} alt={''}/>\r\n}\r\n\r\nexport default Preloader","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__2sHEE\",\"error\":\"FormsControls_error__1hGcs\",\"formSummaryError\":\"FormsControls_formSummaryError__2bLKP\",\"main\":\"FormsControls_main__3d9EZ\",\"formError\":\"FormsControls_formError__2ip-N\"};","export type FieldValidatorType = (value: string) => string | undefined\r\n\r\nexport const required: FieldValidatorType = (value) => {\r\n  if (value) return undefined;\r\n  return \"Field is required!\"\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength: number): FieldValidatorType => (value) => {\r\n  if (value && value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n  return undefined\r\n}","import {getAuthUserData} from \"./authReducer\";\r\nimport {AppStateType} from \"./redux-store\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\n\r\ntype ActionTypes = ReturnType<typeof initializedSuccess>\r\n\r\nconst initialState: InitialStateType = {\r\n  initialized: false\r\n}\r\n\r\nexport type InitialStateType = {\r\n  initialized: boolean\r\n}\r\n\r\nexport const appReducer = (state: InitialStateType = initialState, action: ActionTypes): InitialStateType => {\r\n  switch (action.type) {\r\n    case 'app/INITIALIZED_SUCCESS':\r\n      return {\r\n        ...state,\r\n        initialized: true\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const initializedSuccess = () => {\r\n  return {\r\n    type: 'app/INITIALIZED_SUCCESS'\r\n  } as const\r\n};\r\n\r\nexport const initializedApp = (): ThunkType =>  (dispatch) => {\r\n  let promise = dispatch(getAuthUserData());\r\n  promise.then(()=>{\r\n    dispatch(initializedSuccess())\r\n  })\r\n}\r\n\r\ntype ThunkType = ThunkAction<void, AppStateType, unknown, ActionTypes>\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__Wnhnm\",\"pageNumber\":\"Paginator_pageNumber__1fw8N\",\"selectedPage\":\"Paginator_selectedPage__1RjkC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2CSR8\",\"logoText\":\"Header_logoText__1mZmI\",\"loginBlock\":\"Header_loginBlock__2l0I9\"};"],"sourceRoot":""}